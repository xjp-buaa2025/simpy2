# 航空发动机装配排产仿真系统技术白皮书

## 1. 系统概述

### 1.1 背景与目标
航空发动机装配是一个典型的高复杂度、长周期、资源密集型过程。传统的排产方式往往依赖经验，难以准确预测资源瓶颈、评估产能上限以及平衡工人负荷。本系统基于离散事件仿真（Discrete Event Simulation, DES）技术，旨在构建一个高保真的数字化装配仿真环境。

### 1.2 核心价值
- **产能评估**：在虚拟环境中模拟不同排班和资源配置下的月产量，辅助制定生产计划。
- **瓶颈识别**：通过甘特图和资源利用率统计，精准定位限制产能的设备或工位。
- **人因工程**：引入 REBA (Rapid Entire Body Assessment) 负荷评分与疲劳休息模型，避免工人过度劳累，符合 EHS (Environment, Health and Safety) 要求。
- **风险预测**：模拟工时波动和质量返工对整体交付周期的影响。

## 2. 理论基础与算法

### 2.1 离散事件仿真 (DES)
系统采用 **SimPy** 框架作为核心引擎。
- **仿真时钟**：不同于连续时间仿真，DES 的时钟是跳跃式的，直接从一个事件时间点跳至下一个（如"任务A开始" -> "任务A结束"），极大提高了长周期仿真的计算效率。
- **进程交互**：每个发动机的装配流程、流水线控制逻辑都被建模为 SimPy 的 `Process`（生成器），通过 `yield` 关键字挂起和恢复执行。

### 2.2 DAG 拓扑调度
装配工艺被抽象为 **有向无环图 (DAG)** $G=(V, E)$。
- **节点 $V$**：代表装配工序，包含工时、资源需求等属性。
- **边 $E$**：代表严格的工艺先后约束（Precedence Constraints）。
- **调度算法**：
    1.  **拓扑排序**：利用 Kahn 算法或 DFS 确保线性执行顺序。
    2.  **动态就绪检测**：在仿真运行时的任意时刻 $t$，集合 $R_t$ 包含所有前置节点已完成且尚未开始的节点。
        $$ R_t = \{v \in V \mid \forall u \in \text{Predecessors}(v), \text{Status}(u) = \text{Completed}\} $$
    3.  **关键路径 (CPM)**：计算图中从 Start 到 End 的最长路径长度，作为理论最短工期的基准。

### 2.3 资源受限项目调度 (RCPSP)
系统求解的是 **RCPSP (Resource-Constrained Project Scheduling Problem)** 的变体：
- **目标**：在资源约束下最小化完工时间（Makespan）或最大化单位时间产量（Throughput）。
- **约束**：
    -   **资源约束**：$\sum_{i \in \text{Running}} r_{i,k} \leq R_k$，其中 $r_{i,k}$ 是任务 $i$ 对资源 $k$ 的需求，$R_k$ 是资源 $k$ 的总量。
    -   **资源争用策略**：采用 FCFS (First-Come, First-Served) 结合优先级的策略处理资源排队。

## 3. 系统架构

### 3.1 技术栈概览
| 层级 | 技术选型 | 职责 |
| :--- | :--- | :--- |
| **前端 (Presentation)** | HTML5, CSS3, ES6+ JS | 用户交互、流程图编辑、图表渲染 (Chart.js) |
| **API 网关 (Interface)** | Python FastAPI | HTTP 请求处理、参数校验 (Pydantic)、跨域处理 |
| **核心引擎 (Core)** | SimPy, NetworkX, NumPy | 仿真逻辑执行、图算法计算、随机数生成 |
| **数据层 (Data)** | In-Memory, JSON/CSV | 临时状态存储、配置持久化、数据导入导出 |

### 3.2 目录结构说明
```text
simpy2/
├── app/
│   ├── api/            # 路由与端点定义
│   ├── core/           # 核心业务逻辑
│   │   ├── simulation_engine.py  # 主控循环
│   │   ├── dag_scheduler.py      # 图算法封装
│   │   ├── task_executor.py      # 单任务状态机
│   │   ├── worker_pool.py        # 工人资源池（含负载均衡）
│   │   └── equipment_manager.py  # 设备资源池（含优先级）
│   └── models/         # Pydantic 数据模型
├── frontend/
│   ├── js/             # 模块化前端代码
│   ├── css/            # 样式文件
│   └── index.html      # 单页应用入口
└── tests/              # 单元测试与集成测试
```

## 4. 核心逻辑详解

### 4.1 流水线控制器 (`SimulationEngine._pipeline_controller`)
在多台发动机并行模式下，控制器负责投放新的生产订单：
1.  **资源预检**：检查当前空闲工人数是否满足首道工序（Start Nodes）的需求。
2.  **投放策略**：
    -   若资源充足，启动新发动机 `Process`。
    -   若资源不足，控制器 `yield timeout` 等待资源释放。
3.  **平滑启动**：为避免瞬时拥堵，新发动机启动后会强制等待首道工序标准工时的 50% (`first_task_duration * 0.5`)，形成错峰生产。

### 4.2 任务执行生命周期 (`TaskExecutor`)
单个任务的执行遵循以下状态机流转：

1.  **Created**: 任务被 DAG 调度器识别为就绪。
2.  **Resource Request**:
    -   **工人申请**：调用 `WorkerPool.request_workers`。
        -   *策略*：**负载均衡 (Load Balancing)**。优先选择累计工作时长最短的空闲工人，防止部分工人过劳。
    -   **设备申请**：调用 `EquipmentManager.request_equipment`。
        -   *策略*：**关键资源优先**。使用 `simpy.PriorityResource`，关键设备需排队，普通工具假设无限。
3.  **Waiting**: 若任一资源未满足，任务挂起，记录 `WAITING` 事件（计入非增值时间）。
4.  **Processing**:
    -   资源就位，锁定资源。
    -   **时间触发休息检查 (Rule A)**：检查分配的工人是否连续工作超过阈值（如50分钟）。若触发，插入 `REST` 事件。
    -   **执行模拟**：计算实际工时 $T_{actual} \sim N(\mu, \sigma^2)$。
    -   `yield env.timeout(T_{actual})`。
5.  **Quality Check**:
    -   若任务类型为 M (Measurement) 且设定了返工概率 $P_{rework}$。
    -   生成随机数 $r \in [0,1]$，若 $r < P_{rework}$，触发 **REWORK**：
        -   释放资源，计数器+1，重置任务状态，返回步骤 2（重新排队）。
6.  **Post-Process Rest**:
    -   **负荷触发休息检查 (Rule B)**：若任务负荷评分 (REBA) > 阈值（如7），任务结束后强制插入微休息。
7.  **Completed**: 释放所有资源，标记 DAG 节点完成，触发后续节点就绪检查。

### 4.3 资源管理机制
- **WorkerPool**: 基于 `simpy.FilterStore`。
    -   允许按属性（如 ID、技能、当前状态）筛选特定工人。
    -   维护工人的状态（IDLE, WORKING, RESTING）和统计数据（总工时、休息次数）。
- **EquipmentManager**: 混合管理模式。
    -   **关键设备**：配置在 `GlobalConfig` 中的设备，使用 `PriorityResource` 限制并发数。
    -   **无限设备**：未配置的辅助工具，不进行 `yield request`，仅做日志记录。

## 5. 数据模型规范

### 5.1 工艺节点 (ProcessNode)
对应前端“编辑节点属性”模态框中的数据字段，定义了单个工序的完整属性。

| 字段 (Key) | 显示名称 (Label) | 类型 | 必填 | 说明 |
| :--- | :--- | :--- | :--- | :--- |
| `step_id` | 步骤ID | String | 是 | 全局唯一标识符 (如 "S001")，用于定义依赖关系。 |
| `op_type` | 操作类型 | Enum | 是 | **A**: 装配, **H**: 搬运, **M**: 测量 (含返工), **T**: 工装, **D**: 数据。 |
| `task_name` | 任务名称 | String | 是 | 任务的自然语言描述 (如 "零件接收与登记")，用于甘特图显示。 |
| `std_duration` | 标准工时 | Float | 是 | 熟练工人的标准作业时间 (分钟)。 |
| `time_variance` | 时间方差 | Float | 否 | 模拟人工操作的不确定性 (正态分布标准差)，默认 0。 |
| `work_load_score` | 负荷评分 | Int | 否 | **REBA (1-10)** 人体工学评分。分数越高疲劳积累越快。 |
| `rework_prob` | 返工概率 | Float | 否 | **0.0 - 1.0**。仅 **M (测量)** 类型有效。触发后会回退到前置节点。 |
| `required_workers` | 所需工人数 | Int | 否 | 该任务并行执行所需的最少人数，默认为 1。 |
| `required_tools` | 所需工具 | String | 否 | 分号分隔的工具列表 (如 "动平衡机;扭力扳手")，需与全局配置匹配。 |
| `predecessors` | 前置依赖 | String | 否 | 分号分隔的前置节点 ID (如 "S001;S002")，定义 DAG 结构。 |
| `station` | 工位 | String | 是 | 任务发生的物理空间/逻辑区域 (如 "ST01")，用于资源分组。 |

### 5.2 全局配置 (GlobalConfig)
对应前端“参数配置”页面，分为排班、设备、休息规则三大板块。

#### 5.2.1 排班配置
| 字段 (Key) | 显示名称 (Label) | 默认值 | 说明 |
| :--- | :--- | :--- | :--- |
| `work_hours_per_day` | 每日工作小时数 | 8 | 决定每天的仿真时间窗口 (Time Window)。 |
| `work_days_per_month` | 每月工作天数 | 22 | 用于计算总仿真时长上限。 |
| `num_workers` | 工人数量 | 6 | **核心资源**。决定系统的最大并行处理能力。 |
| `target_output` | 目标月产量 | 3 | KPI 计算基准，用于评估计划达成率。 |

#### 5.2.2 关键设备配置
动态键值对列表 (`critical_equipment`)，用于定义除“无限设备”外的瓶颈资源。
- **Key**: 设备名称 (如 "动平衡机")
- **Value**: 可用数量 (如 1)
> **注意**: 此处配置的设备必须与工序节点中 `required_tools` 字段的名称完全一致。

#### 5.2.3 休息规则配置 (人因工程核心)
| 字段 (Key) | 显示名称 (Label) | 默认值 | 说明 |
| :--- | :--- | :--- | :--- |
| `rest_time_threshold` | 连续工作触发阈值 | 50 | 连续工作满此分钟数后，强制进入“时间性休息”。 |
| `rest_duration_time` | 时间触发休息时长 | 5 | “时间性休息”持续分钟数。 |
| `rest_load_threshold` | 负荷触发阈值 | 7 | REBA 评分 >= 此值时，任务结束后触发“负荷性休息”。 |
| `rest_duration_load` | 负荷触发休息时长 | 3 | “负荷性休息”持续分钟数。 |

#### 5.2.4 高级配置
| 字段 (Key) | 显示名称 (Label) | 默认值 | 说明 |
| :--- | :--- | :--- | :--- |
| `pipeline_mode` | 启用流水线模式 | True | 是否开启多台发动机并行投放。关闭时为单台串行模式。 |
| `station_constraint_mode` | 启用工位资源限制 | False | 是否强制同一工位内的任务串行执行。开启后，每个工位被视为容量为1的关键资源。 |

## 6. 前端系统设计

前端采用模块化的原生 JavaScript (ES6+) 开发，无需构建工具，直接在浏览器运行。设计遵循 "Model-View" 分离原则，通过全局 `state` 对象管理数据状态。

### 6.1 核心模块架构
```text
frontend
├── css
│   └── styles.css     # 全局样式定义 (CSS Variables, Glassmorphism)
├── js
│   ├── analysis.js    # 智能分析模块 (瓶颈识别、效率评分)
│   ├── canvas.js      # 核心渲染引擎 (Canvas 2D Context)
│   ├── charts.js      # 数据可视化封装 (Chart.js)
│   ├── config.js      # 参数配置页面逻辑
│   ├── csv.js         # 数据导入导出处理 (CSV Parsing)
│   ├── data.js        # 预置模板数据与常量定义
│   ├── editor.js      # 流程编辑器交互逻辑 (拖拽、连线)
│   ├── layout.js      # 自动布局算法 (Dagre 适配)
│   ├── main.js        # 应用入口与全局初始化
│   ├── simulation.js  # 仿真控制与后端通信
│   ├── state.js       # 全局状态管理 (Reactive State)
│   ├── ui.js          # UI 组件交互与动画控制
│   └── utils.js       # 通用工具函数库
└── index.html         # 单页应用入口结构
```

### 6.2 可视化编辑器引擎 (`canvas.js`)
编辑器基于 HTML5 Canvas 2D Context 构建，实现了类似于 CAD 软件的交互体验。

#### 6.2.1 渲染管线 (Rendering Pipeline)
每一帧的渲染 (`renderCanvas`) 遵循严格的图层顺序：
1.  **背景层**：绘制无限网格 (Infinite Grid)，随缩放和平移变换。
2.  **容器层**：在 "工位视图" 下绘制 `roundRect` 容器，表示物理工位区域。
3.  **连接层**：
    -   **贝塞尔曲线**：使用 `bezierCurveTo` 绘制平滑连线。
    -   **动态路由**：根据节点相对位置动态计算控制点 (Control Points)，确保线条自然弯曲。
4.  **节点层**：绘制矩形节点，根据 `op_type` 填充不同颜色，显示图标和文本。
5.  **交互层**：绘制选中框 (Selection Box)、拖拽预览虚线、悬停高亮效果。

#### 6.2.2 交互逻辑
-   **坐标变换**：维护全局 `canvasOffset` (平移量) 和 `scale` (缩放倍率)。鼠标事件坐标 $(x_{screen}, y_{screen})$ 需通过逆矩阵变换映射回逻辑坐标 $(x_{world}, y_{world})$。
-   **碰撞检测**：简单的 AABB (Axis-Aligned Bounding Box) 碰撞检测，用于判断鼠标点击是否命中节点。
-   **状态机**：内部维护 `isDragging`, `isConnecting`, `isPanning` 等状态，处理复杂的鼠标手势（如右键拖拽连线、中键平移画布）。

### 6.3 数据可视化系统 (`charts.js`)
系统深度定制了 Chart.js，并实现了高性能的自定义甘特图。

#### 6.3.1 动态图表
-   **疲劳曲线图**：Line Chart。支持 "All Workers" 模式（多条折线）和单人聚焦模式。X轴为仿真时间，Y轴为疲劳度 (0-100)。
-   **资源利用率**：Stacked Bar Chart。将时间分解为 `Work`, `Rest`, `Idle` 三部分，直观展示资源瓶颈。

#### 6.3.2 自研甘特图渲染
由于标准图表库难以满足复杂的甘特图需求（如浮动条、多状态颜色、大数据量渲染），系统实现了原生 DOM 渲染的甘特图：
-   **虚拟滚动**：虽然目前是全量渲染，但设计上支持分块渲染以应对长周期仿真。
-   **双向同步**：实现了 `engineBody` 和 `workerBody` 的滚动联动，以及左侧 Label 区与右侧 Timeline 区的垂直同步滚动。
-   **自适应布局**：根据仿真总时长动态计算 `hourWidth` (每小时像素宽)，确保时间轴在可视区域内合理分布。

### 6.4 状态管理与数据流
-   **单一数据源**：所有业务数据（节点、连线、配置、结果）存储在 `state` 对象中。
-   **响应式更新**：修改 `state` 后显式调用 `renderCanvas()` 或 `updateResults()` 刷新视图。
-   **数据持久化**：
    -   **导出**：将 `state.nodes` 和 `state.config` 序列化为 CSV/JSON 下载。
    -   **导入**：解析 CSV 文件，重构节点对象和依赖关系 (`rebuildEdges`)。

### 6.5 前后端通信 (`simulation.js`)
采用标准的 RESTful 调用模式：
1.  **构建请求**：从 UI 读取配置，从 `state` 读取节点数据，组装 `SimulationRequest` 对象。
2.  **异步处理**：`fetch('/api/simulation/run')` 发送 POST 请求，期间显示全局 Loading 遮罩。
3.  **结果分发**：收到 JSON 响应后，通过 `updateResults(data)` 函数分发数据到 KPI 面板、对比表格和各个图表组件。


## 7. 前端功能模块详解

### 7.1 主界面布局
- **顶栏 (Header)**:
  - **系统标题**: 标识当前仿真任务。
  - **全局操作**:
    - `导入 CSV`: 上传历史保存的工艺流程文件。
    - `导出 CSV`: 将当前画布的节点与连线保存为 CSV 格式。
    - `运行仿真`: 提交当前配置与流程数据，触发后端仿真计算。
- **导航栏 (Tabs)**: 包含 "流程编辑"、"参数配置"、"仿真结果"、"甘特图" 四大核心模块切换。
- **侧边栏 (Sidebar)**: 仅在流程编辑页面显示，提供节点工具箱和实时流程统计（节点数/连线数）。

### 7.2 流程编辑页 (Process Editor)
这是用户定义装配工艺流程的核心区域。
- **画布操作**:
  - **拖拽创建**: 从左侧工具箱拖拽节点到画布。
  - **连线交互**: **右键拖拽** 两个节点即可创建依赖关系（边）。
  - **属性编辑**: **双击节点** 弹出模态框，设置工时、方差、负荷评分、返工概率等。
  - **视图控制**: 鼠标滚轮缩放，按住中键平移画布。
- **工具箱 (Toolbox)**:
  - `H (Handling)`: 搬运类任务（蓝色）。
  - `A (Assembly)`: 装配类任务（绿色）。
  - `M (Measurement)`: 测量/检验类任务（橙色），支持设置返工概率。
  - `T (Tooling)`: 工装准备类任务（紫色）。
  - `D (Data)`: 数据记录类任务（灰色）。
- **辅助功能**:
  - **自动布局**: 基于 Dagre 算法的一键排版。
  - **工位层级视图**: 切换到按物理工位聚合的视图模式，直观展示工位间的物流流向。
  - **工位过滤**: 下拉选择特定工位，高亮显示相关节点，淡化其他节点。

### 7.3 参数配置页 (Configuration)
用于设定仿真环境的边界条件和资源约束。
- **排班设置**:
  - `每日工时`: 1-24 小时。
  - `每月天数`: 1-31 天。
  - `工人数量`: 决定系统的并行处理能力。
  - `目标产量`: 用于计算计划达成率。
- **关键设备管理**:
  - 动态列表展示当前配置的设备（如动平衡机、试车台）。
  - 支持实时添加新设备类型及设定数量。
- **疲劳休息规则**:
  - `时间触发`: 设定连续工作多久（如50分钟）强制休息一次。
  - `负荷触发`: 设定 REBA 评分阈值（如7分），超过该强度的任务后强制微休息。

### 7.4 仿真结果页 (Simulation Results)
仿真运行结束后自动跳转至此页，展示多维度的分析报表。
- **KPI 仪表盘**:
  - **月产量**: 实际完成的发动机台数。
  - **计划达成率**: 实际产量 / 目标产量。
  - **平均周期时间**: 发动机从上线到下线的平均耗时。
  - **一次通过率 (FPY)**: 无返工发动机占比。
  - **人因指标**: 总休息时间、高强度任务暴露次数。
- **对比分析表**: 自动对比“考虑人因（当前）”与“不考虑人因（基准）”在产量、周期、质量上的差异。
- **可视化图表**:
  - **工人利用率**: 堆叠柱状图展示每位工人的 `工作`、`休息`、`空闲` 时间分布。
  - **设备利用率**: 展示关键设备的繁忙程度。
  - **疲劳度曲线**: 折线图展示工人随时间的疲劳积累与恢复过程，支持筛选查看。
- **瓶颈智能分析**:
  - 自动识别利用率 Top3 的资源。
  - 计算系统效率评分。
  - 提供基于数据的改进建议（如“增加动平衡机数量”）。

### 7.5 甘特图页 (Gantt Chart)
用于微观层面的作业调度分析。
- **双视图切换**:
  - **发动机视图**: 以发动机为维度，展示每台发动机的装配进度，便于观察流水线节拍。
  - **工人视图**: 以工人为维度，展示每个工人的任务序列，便于检查负载均衡。
- **交互控制**:
  - **时间范围筛选**: 下拉选择起始天/小时，聚焦查看特定时间段的调度细节。
  - **滚动联动**: 左侧的资源名称栏与右侧的时间轴区域实现垂直滚动同步，便于查阅大量数据。

## 8. 接口文档 (API Reference)

### 8.1 仿真控制
- **POST /api/simulation/run**
    -   Request: `{ config: GlobalConfig, process: ProcessDefinition }`
    -   Response: `{ sim_id: string, summary: SimulationResult, ... }`
    -   描述：提交配置和流程，触发后台仿真任务。

### 8.2 结果查询
- **GET /api/results/{sim_id}/worker-stats**
    -   Response: `List[WorkerStats]`
    -   描述：获取每个工人的详细工时、休息时间、利用率。
- **GET /api/results/{sim_id}/equipment-stats**
    -   Response: `List[EquipmentStats]`
    -   描述：获取关键设备的利用率、排队长度统计。

### 8.3 数据管理
- **GET /api/simulation/status/{sim_id}**
    -   描述：轮询仿真任务的运行状态（Pending/Running/Completed）。

## 9. 案例分析：某型航空发动机装配仿真实验

本章节基于真实工业数据 `data/3.csv` 进行仿真实验分析，旨在验证系统在复杂装配流程中的调度能力及人因工程模块的有效性。

### 9.1 实验数据说明
实验对象为某型涡轴/涡桨发动机的装配流程，数据包含 **79个工序节点**，涉及 **13个物理工位**（ST01-ST13）。流程具有典型的“多分支并行汇聚”特征：
- **并行模块**：
  - **S系列（进气/支撑）**：零件接收、清洗、检验（ST01）。
  - **P系列（核心机）**：压气机与燃烧室装配，包含高精度的动平衡与间隙调整（ST03）。
  - **D系列（动力涡轮）**：涡轮盘与轴承装配（ST05）。
  - **G系列（减速箱）**：齿轮与传动轴装配（ST06）。
  - **F系列（附件传动）**：机匣与附件齿轮装配（ST04）。
  - **B系列（管路预装）**：燃油、滑油、气动、电气等系统的长周期预装配（ST07-ST10）。
- **总装与测试**：
  - **A系列（总装）**：各模块对接、管路连接及整机气密测试（ST11）。
  - **Q系列（试车）**：热试车、性能采集及最终交付（ST13）。

#### 9.1.1 实验配置说明
本实验的全局参数依据前端“参数配置”页面设定，映射到后端 `GlobalConfig` 模型字段如下：

| 配置项 | 数值 | 对应模型字段 |
| :--- | :--- | :--- |
| 每日工作小时数 | 8 | work_hours_per_day |
| 每月工作天数 | 22 | work_days_per_month |
| 工人数量 | 15 | num_workers |
| 目标月产量 | 10 | target_output |
| 关键设备 | 试车台:1, 平衡机:2, 氦质谱检测系统:1 | critical_equipment |
| 连续工作触发阈值(分钟) | 40 | rest_time_threshold |
| 时间触发休息时长(分钟) | 10 | rest_duration_time |
| 负荷触发阈值(REBA) | 5 | rest_load_threshold |
| 负荷触发休息时长(分钟) | 10 | rest_duration_load |

说明：
- 关键设备名称需与工艺节点中的 required_tools 完全一致，以启用资源排队与并发限制。
- REBA 评分范围为 1-10，高于阈值的任务在完成后将插入负荷性休息事件。

### 9.2 实验结果分析
通过对比“基准模式（不考虑人因）”与“人因模式（引入疲劳与恢复）”，并在单机串行模式下进行仿真（模拟Plant Simulation的严格站级约束），我们得到以下关键结论及可视化图表。

#### 9.2.1 仿真指标概览
在启用“工位资源限制”且关闭“流水线并行”的严格模式下，系统月产量回归至 **3台**，与 Plant Simulation 的基准数据高度一致。

- **KPI 仪表盘**：
  - **月产量**：3 台
  - **计划达成率**：100.0%
  - **平均周期时间**：56.7 小时（约 3400 分钟）
  - **一次通过率**：100.0%（得益于低负荷下的高质量产出）
  - **人因指标**：总休息时间 1690 分钟，高强度任务暴露 0 次。

- **对比分析**：
  - 引入人因疲劳机制后，平均周期时间从 52.6 小时增加至 56.7 小时（↑7.8%），体现了工人在疲劳恢复期间的产能损耗。
  - 由于单机串行模式下资源充裕，工人疲劳积累较慢，未出现严重积压。

#### 9.2.2 资源利用率与瓶颈识别
下图展示了在低产量模式下的资源利用情况，呈现出显著的“资源闲置”特征。

1.  **工人利用率**：15名工人的工作负荷极低，大量时间处于空闲（灰色柱状图），仅有少量时间用于工作（蓝色）和休息（紫色）。
2.  **设备利用率**：关键设备（如试车台）的利用率仅为 **8.8%**，远低于并行模式下的 35.4%，说明在单机模式下设备不是瓶颈。
3.  **瓶颈分析**：系统未检测到明显瓶颈（总瓶颈数 0，效率评分 100分），表明当前生产节拍受限于投产策略而非资源能力。

![资源利用率：展示了单机模式下大量的资源闲置](请在此处插入资源利用率截图.png)

#### 9.2.3 人因疲劳度演化
即使在低负荷模式下，工人的疲劳度曲线（如下图）仍呈现出动态变化：
- **波动特征**：随着任务执行，疲劳度（彩色曲线）呈锯齿状上升，但在长周期的空闲等待中迅速回落。
- **休息干预**：系统自动插入的微休息（Rest）有效控制了峰值疲劳，确保了 100% 的一次通过率。

![疲劳度曲线：展示工人疲劳积累与休息恢复的动态过程](请在此处插入疲劳度曲线截图.png)

#### 9.2.4 工位流转分析
通过工位统计分析，可以清晰看到单台发动机的流转路径：
- **主要路径**：原材料入库 -> 压气机/涡轮/燃烧室模块（并行） -> 总装集成 -> 包装发运。
- **执行频次**：各模块工位的执行次数与单台发动机的工艺结构严格对应（如压气机装配区执行 54 次，对应其复杂的子装配步骤）。

![工位统计：展示了各工位的执行频次与流转路径](请在此处插入工位统计截图.png)
 
### 9.3 结论
实验表明，本系统能够有效模拟复杂离散制造过程中的资源竞争与人因约束。通过识别 ST03 和 ST11 为瓶颈工位，建议在实际生产中增加这两个工位的多能工配置或引入辅助设备，以提升整体产能。
